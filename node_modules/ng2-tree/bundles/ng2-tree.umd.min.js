!function(e){function t(e){Object.defineProperty(this,e,{enumerable:!0,get:function(){return this[v][e]}})}function r(e){if("undefined"!=typeof System&&System.isModule?System.isModule(e):"[object Module]"===Object.prototype.toString.call(e))return e;var t={default:e,__useDefault:e};if(e&&e.__esModule)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return new o(t)}function o(e){Object.defineProperty(this,v,{value:e}),Object.keys(e).forEach(t,this)}function n(e){return"@node/"===e.substr(0,6)?c(e,r(m(e.substr(6))),{}):p[e]}function u(e){var t=n(e);if(!t)throw new Error('Module "'+e+'" expected, but not contained in build.');if(t.module)return t.module;var r=t.linkRecord;return i(t,r),a(t,r,[]),t.module}function i(e,t){if(!t.depLoads){t.declare&&d(e,t),t.depLoads=[];for(var r=0;r<t.deps.length;r++){var o=n(t.deps[r]);t.depLoads.push(o),o.linkRecord&&i(o,o.linkRecord);var u=t.setters&&t.setters[r];u&&(u(o.module||o.linkRecord.moduleObj),o.importerSetters.push(u))}return e}}function d(t,r){var o=r.moduleObj,n=t.importerSetters,u=!1,i=r.declare.call(e,function(e,t){if(!u){if("object"==typeof e)for(var r in e)"__useDefault"!==r&&(o[r]=e[r]);else o[e]=t;u=!0;for(var i=0;i<n.length;i++)n[i](o);return u=!1,t}},{id:t.key});"function"!=typeof i?(r.setters=i.setters,r.execute=i.execute):(r.setters=[],r.execute=i)}function l(e,t,r){return p[e]={key:e,module:void 0,importerSetters:[],linkRecord:{deps:t,depLoads:void 0,declare:r,setters:void 0,execute:void 0,moduleObj:{}}}}function f(e,t,r,o){var n={};return p[e]={key:e,module:void 0,importerSetters:[],linkRecord:{deps:t,depLoads:void 0,declare:void 0,execute:o,executingRequire:r,moduleObj:{default:n,__useDefault:n},setters:void 0}}}function s(e,t,r){return function(o){for(var n=0;n<e.length;n++)if(e[n]===o){var u,i=t[n],d=i.linkRecord;return u=d?-1===r.indexOf(i)?a(i,d,r):d.moduleObj:i.module,"__useDefault"in u?u.__useDefault:u}}}function a(t,r,n){if(n.push(t),t.module)return t.module;if(r.setters){for(var i=0;i<r.deps.length;i++){var d=r.depLoads[i],l=d.linkRecord;l&&-1===n.indexOf(d)&&a(d,l,l.setters?n:[])}r.execute.call(y)}else{var f={id:t.key},c=r.moduleObj;Object.defineProperty(f,"exports",{configurable:!0,set:function(e){c.default=c.__useDefault=e},get:function(){return c.__useDefault}});var p=s(r.deps,r.depLoads,n);if(!r.executingRequire)for(var i=0;i<r.deps.length;i++)p(r.deps[i]);var v=r.execute.call(e,p,c.__useDefault,f);void 0!==v?c.default=c.__useDefault=v:f.exports!==c.__useDefault&&(c.default=c.__useDefault=f.exports);var m=c.__useDefault;if(m&&m.__esModule)for(var b in m)Object.hasOwnProperty.call(m,b)&&(c[b]=m[b])}var f=t.module=new o(r.moduleObj);if(!r.setters)for(var i=0;i<t.importerSetters.length;i++)t.importerSetters[i](f);return f}function c(e,t){return p[e]={key:e,module:t,importerSetters:[],linkRecord:void 0}}var p={},v="undefined"!=typeof Symbol?Symbol():"@@baseObject";o.prototype=Object.create(null),"undefined"!=typeof Symbol&&Symbol.toStringTag&&(o.prototype[Symbol.toStringTag]="Module");var m="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&void 0!==require.resolve&&"undefined"!=typeof process&&process.platform&&require,y={};return Object.freeze&&Object.freeze(y),function(e,t,n,i){return function(d){d(function(d){var s={_nodeRequire:m,register:l,registerDynamic:f,registry:{get:function(e){return p[e].module},set:c},newModule:function(e){return new o(e)}};c("@empty",new o({}));for(var a=0;a<t.length;a++)c(t[a],r(arguments[a],{}));i(s);var v=u(e[0]);if(e.length>1)for(var a=1;a<e.length;a++)u(e[a]);return n?v.__useDefault:(v instanceof o&&Object.defineProperty(v,"__esModule",{value:!0}),v)})}}}("undefined"!=typeof self?self:"undefined"!=typeof global?global:this)(["a"],["29","f","27","1e","23","d","c"],!0,function($__System){this.require,this.exports,this.module;$__System.registerDynamic("b",["c","d"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0}),$__require("c"),$__require("d"),exports.noop=function(){}}),$__System.registerDynamic("e",["f","10","11","12"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var core_1=$__require("f"),tree_service_1=$__require("10"),tree_1=($__require("11"),$__require("12")),TreeComponent=function(){function TreeComponent(treeService){this.treeService=treeService,this.nodeCreated=new core_1.EventEmitter,this.nodeRemoved=new core_1.EventEmitter,this.nodeRenamed=new core_1.EventEmitter,this.nodeSelected=new core_1.EventEmitter,this.nodeMoved=new core_1.EventEmitter,this.nodeExpanded=new core_1.EventEmitter,this.nodeCollapsed=new core_1.EventEmitter,this.menuItemSelected=new core_1.EventEmitter,this.loadNextLevel=new core_1.EventEmitter,this.subscriptions=[]}return TreeComponent.prototype.ngOnChanges=function(changes){this.treeModel?this.tree=new tree_1.Tree(this.treeModel):this.tree=TreeComponent.EMPTY_TREE},TreeComponent.prototype.ngOnInit=function(){var _this=this;this.subscriptions.push(this.treeService.nodeRemoved$.subscribe(function(e){_this.nodeRemoved.emit(e)})),this.subscriptions.push(this.treeService.nodeRenamed$.subscribe(function(e){_this.nodeRenamed.emit(e)})),this.subscriptions.push(this.treeService.nodeCreated$.subscribe(function(e){_this.nodeCreated.emit(e)})),this.subscriptions.push(this.treeService.nodeSelected$.subscribe(function(e){_this.nodeSelected.emit(e)})),this.subscriptions.push(this.treeService.nodeMoved$.subscribe(function(e){_this.nodeMoved.emit(e)})),this.subscriptions.push(this.treeService.nodeExpanded$.subscribe(function(e){_this.nodeExpanded.emit(e)})),this.subscriptions.push(this.treeService.nodeCollapsed$.subscribe(function(e){_this.nodeCollapsed.emit(e)})),this.subscriptions.push(this.treeService.menuItemSelected$.subscribe(function(e){_this.menuItemSelected.emit(e)})),this.subscriptions.push(this.treeService.loadNextLevel$.subscribe(function(e){_this.loadNextLevel.emit(e)}))},TreeComponent.prototype.getController=function(){return this.rootComponent.controller},TreeComponent.prototype.getControllerByNodeId=function(id){return this.treeService.getController(id)},TreeComponent.prototype.ngOnDestroy=function(){this.subscriptions.forEach(function(sub){return sub&&sub.unsubscribe()})},TreeComponent.EMPTY_TREE=new tree_1.Tree({value:""}),TreeComponent.decorators=[{type:core_1.Component,args:[{selector:"tree",template:'<tree-internal #rootComponent [tree]="tree" [settings]="settings" [template]="template"></tree-internal>',providers:[tree_service_1.TreeService]}]}],TreeComponent.ctorParameters=function(){return[{type:tree_service_1.TreeService,decorators:[{type:core_1.Inject,args:[tree_service_1.TreeService]}]}]},TreeComponent.propDecorators={treeModel:[{type:core_1.Input,args:["tree"]}],settings:[{type:core_1.Input}],nodeCreated:[{type:core_1.Output}],nodeRemoved:[{type:core_1.Output}],nodeRenamed:[{type:core_1.Output}],nodeSelected:[{type:core_1.Output}],nodeMoved:[{type:core_1.Output}],nodeExpanded:[{type:core_1.Output}],nodeCollapsed:[{type:core_1.Output}],menuItemSelected:[{type:core_1.Output}],loadNextLevel:[{type:core_1.Output}],rootComponent:[{type:core_1.ViewChild,args:["rootComponent"]}],template:[{type:core_1.ContentChild,args:[core_1.TemplateRef]}]},TreeComponent}();exports.TreeComponent=TreeComponent}),$__System.registerDynamic("13",["14","15"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var menu_events_1=$__require("14"),event_utils_1=$__require("15"),TreeController=function(){function TreeController(component){this.component=component,this.tree=this.component.tree,this.treeService=this.component.treeService}return TreeController.prototype.select=function(){this.isSelected()||this.component.onNodeSelected({button:event_utils_1.MouseButtons.Left})},TreeController.prototype.isSelected=function(){return this.component.isSelected},TreeController.prototype.expand=function(){this.isCollapsed()&&this.component.onSwitchFoldingType()},TreeController.prototype.isExpanded=function(){return this.tree.isNodeExpanded()},TreeController.prototype.collapse=function(){this.isExpanded()&&this.component.onSwitchFoldingType()},TreeController.prototype.isCollapsed=function(){return this.tree.isNodeCollapsed()},TreeController.prototype.toTreeModel=function(){return this.tree.toTreeModel()},TreeController.prototype.rename=function(newValue){this.tree.markAsBeingRenamed(),this.component.applyNewValue({type:"keyup",value:newValue})},TreeController.prototype.remove=function(){this.component.onMenuItemSelected({nodeMenuItemAction:menu_events_1.NodeMenuItemAction.Remove})},TreeController.prototype.addChild=function(newNode){if(!this.tree.hasDeferredChildren()||this.tree.childrenWereLoaded()){var newTree=this.tree.createNode(Array.isArray(newNode.children),newNode);this.treeService.fireNodeCreated(newTree)}},TreeController.prototype.changeNodeId=function(id){if(!id)throw Error("You should supply an id!");if(this.treeService.hasController(id))throw Error("Controller already exists for the given id: "+id);this.treeService.deleteController(this.tree.id),this.tree.id=id,this.treeService.setController(this.tree.id,this)},TreeController.prototype.reloadChildren=function(){this.tree.reloadChildren()},TreeController.prototype.setChildren=function(children){this.tree.isLeaf()||this.tree.setChildren(children)},TreeController.prototype.startRenaming=function(){this.tree.markAsBeingRenamed()},TreeController}();exports.TreeController=TreeController}),$__System.registerDynamic("16",["f","11","12","13","17","14","18","10","15","19"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var core_1=$__require("f"),tree_1=($__require("11"),$__require("12")),tree_controller_1=$__require("13"),node_menu_service_1=$__require("17"),menu_events_1=$__require("14"),editable_events_1=$__require("18"),tree_service_1=$__require("10"),EventUtils=$__require("15"),fn_utils_1=$__require("19"),TreeInternalComponent=function(){function TreeInternalComponent(nodeMenuService,treeService,element){this.nodeMenuService=nodeMenuService,this.treeService=treeService,this.element=element,this.isSelected=!1,this.isRightMenuVisible=!1,this.isLeftMenuVisible=!1,this.subscriptions=[]}return TreeInternalComponent.prototype.ngOnInit=function(){var _this=this;this.controller=new tree_controller_1.TreeController(this),fn_utils_1.get(this.tree,"node.id","")&&this.treeService.setController(this.tree.node.id,this.controller),this.settings=this.settings||{rootIsVisible:!0},this.subscriptions.push(this.nodeMenuService.hideMenuStream(this.element).subscribe(function(){_this.isRightMenuVisible=!1,_this.isLeftMenuVisible=!1})),this.subscriptions.push(this.treeService.unselectStream(this.tree).subscribe(function(){return _this.isSelected=!1})),this.subscriptions.push(this.treeService.draggedStream(this.tree,this.element).subscribe(function(e){_this.tree.hasSibling(e.captured.tree)?_this.swapWithSibling(e.captured.tree,_this.tree):_this.tree.isBranch()?_this.moveNodeToThisTreeAndRemoveFromPreviousOne(e,_this.tree):_this.moveNodeToParentTreeAndRemoveFromPreviousOne(e,_this.tree)}))},TreeInternalComponent.prototype.ngOnChanges=function(changes){this.controller=new tree_controller_1.TreeController(this)},TreeInternalComponent.prototype.ngOnDestroy=function(){fn_utils_1.get(this.tree,"node.id","")&&this.treeService.deleteController(this.tree.node.id),this.subscriptions.forEach(function(sub){return sub&&sub.unsubscribe()})},TreeInternalComponent.prototype.swapWithSibling=function(sibling,tree){tree.swapWithSibling(sibling),this.treeService.fireNodeMoved(sibling,sibling.parent)},TreeInternalComponent.prototype.moveNodeToThisTreeAndRemoveFromPreviousOne=function(e,tree){this.treeService.fireNodeRemoved(e.captured.tree);var addedChild=tree.addChild(e.captured.tree);this.treeService.fireNodeMoved(addedChild,e.captured.tree.parent)},TreeInternalComponent.prototype.moveNodeToParentTreeAndRemoveFromPreviousOne=function(e,tree){this.treeService.fireNodeRemoved(e.captured.tree);var addedSibling=tree.addSibling(e.captured.tree,tree.positionInParent);this.treeService.fireNodeMoved(addedSibling,e.captured.tree.parent)},TreeInternalComponent.prototype.onNodeSelected=function(e){EventUtils.isLeftButtonClicked(e)&&(this.isSelected=!0,this.treeService.fireNodeSelected(this.tree))},TreeInternalComponent.prototype.showRightMenu=function(e){this.tree.hasRightMenu()&&(EventUtils.isRightButtonClicked(e)&&(this.isRightMenuVisible=!this.isRightMenuVisible,this.nodeMenuService.hideMenuForAllNodesExcept(this.element)),e.preventDefault())},TreeInternalComponent.prototype.showLeftMenu=function(e){this.tree.hasLeftMenu()&&EventUtils.isLeftButtonClicked(e)&&(this.isLeftMenuVisible=!this.isLeftMenuVisible,this.nodeMenuService.hideMenuForAllNodesExcept(this.element),this.isLeftMenuVisible&&e.preventDefault())},TreeInternalComponent.prototype.onMenuItemSelected=function(e){switch(e.nodeMenuItemAction){case menu_events_1.NodeMenuItemAction.NewTag:case menu_events_1.NodeMenuItemAction.NewFolder:this.onNewSelected(e);break;case menu_events_1.NodeMenuItemAction.Rename:this.onRenameSelected();break;case menu_events_1.NodeMenuItemAction.Remove:this.onRemoveSelected();break;case menu_events_1.NodeMenuItemAction.Custom:this.treeService.fireMenuItemSelected(this.tree,e.nodeMenuItemSelected);break;default:throw new Error("Chosen menu item doesn't exist")}},TreeInternalComponent.prototype.onNewSelected=function(e){this.tree.createNode(e.nodeMenuItemAction===menu_events_1.NodeMenuItemAction.NewFolder),this.isRightMenuVisible=!1,this.isLeftMenuVisible=!1},TreeInternalComponent.prototype.onRenameSelected=function(){this.tree.markAsBeingRenamed(),this.isRightMenuVisible=!1,this.isLeftMenuVisible=!1},TreeInternalComponent.prototype.onRemoveSelected=function(){this.treeService.deleteController(fn_utils_1.get(this.tree,"node.id","")),this.treeService.fireNodeRemoved(this.tree)},TreeInternalComponent.prototype.onSwitchFoldingType=function(){this.tree.switchFoldingType(),this.treeService.fireNodeSwitchFoldingType(this.tree)},TreeInternalComponent.prototype.applyNewValue=function(e){if((e.action===editable_events_1.NodeEditableEventAction.Cancel||this.tree.isNew())&&tree_1.Tree.isValueEmpty(e.value))return this.treeService.fireNodeRemoved(this.tree);if(this.tree.isNew()&&(this.tree.value=e.value,this.treeService.fireNodeCreated(this.tree)),this.tree.isBeingRenamed()){var oldValue=this.tree.value;this.tree.value=e.value,this.treeService.fireNodeRenamed(oldValue,this.tree)}this.tree.markAsModified()},TreeInternalComponent.prototype.shouldShowInputForTreeValue=function(){return this.tree.isNew()||this.tree.isBeingRenamed()},TreeInternalComponent.prototype.isRootHidden=function(){return this.tree.isRoot()&&!this.settings.rootIsVisible},TreeInternalComponent.prototype.hasCustomMenu=function(){return this.tree.hasCustomMenu()},TreeInternalComponent.decorators=[{type:core_1.Component,args:[{selector:"tree-internal",template:'\n  <ul class="tree" *ngIf="tree" [ngClass]="{rootless: isRootHidden()}">\n    <li>\n      <div class="value-container"\n        [ngClass]="{rootless: isRootHidden()}"\n        [class.selected]="isSelected"\n        (contextmenu)="showRightMenu($event)"\n        [nodeDraggable]="element"\n        [tree]="tree">\n\n        <div class="folding" (click)="onSwitchFoldingType()" [ngClass]="tree.foldingCssClass"></div>\n        <div class="node-value"\n          *ngIf="!shouldShowInputForTreeValue()"\n          [class.node-selected]="isSelected"\n          (click)="onNodeSelected($event)">\n            <div *ngIf="tree.nodeTemplate" class="node-template" [innerHTML]="tree.nodeTemplate | safeHtml"></div>\n            <span *ngIf="!template" class="node-name" [innerHTML]="tree.value | safeHtml"></span>\n            <span class="loading-children" *ngIf="tree.childrenAreBeingLoaded()"></span>\n            <ng-template [ngTemplateOutlet]="template" [ngTemplateOutletContext]="{ $implicit: tree.node }"></ng-template>\n        </div>\n\n        <input type="text" class="node-value"\n           *ngIf="shouldShowInputForTreeValue()"\n           [nodeEditable]="tree.value"\n           (valueChanged)="applyNewValue($event)"/>\n\n        <div class="node-left-menu" *ngIf="tree.hasLeftMenu()" (click)="showLeftMenu($event)" [innerHTML]="tree.leftMenuTemplate">\n        </div>\n        <node-menu *ngIf="tree.hasLeftMenu() && isLeftMenuVisible && !hasCustomMenu()"\n          (menuItemSelected)="onMenuItemSelected($event)">\n        </node-menu>\n      </div>\n\n      <node-menu *ngIf="isRightMenuVisible && !hasCustomMenu()"\n           (menuItemSelected)="onMenuItemSelected($event)">\n      </node-menu>\n\n      <node-menu *ngIf="hasCustomMenu() && (isRightMenuVisible || isLeftMenuVisible)"\n           [menuItems]="tree.menuItems"\n           (menuItemSelected)="onMenuItemSelected($event)">\n      </node-menu>\n      <ng-template [ngIf]="tree.isNodeExpanded()">\n        <tree-internal *ngFor="let child of tree.childrenAsync | async" [tree]="child" [template]="template"></tree-internal>\n      </ng-template>\n    </li>\n  </ul>\n  '}]}],TreeInternalComponent.ctorParameters=function(){return[{type:node_menu_service_1.NodeMenuService},{type:tree_service_1.TreeService},{type:core_1.ElementRef}]},TreeInternalComponent.propDecorators={tree:[{type:core_1.Input}],settings:[{type:core_1.Input}],template:[{type:core_1.Input}]},TreeInternalComponent}();exports.TreeInternalComponent=TreeInternalComponent}),$__System.registerDynamic("1a",[],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var CapturedNode=function(){function CapturedNode(anElement,aTree){this.anElement=anElement,this.aTree=aTree}return CapturedNode.prototype.canBeDroppedAt=function(element){return!this.sameAs(element)&&!this.contains(element)},CapturedNode.prototype.contains=function(other){return this.element.nativeElement.contains(other.nativeElement)},CapturedNode.prototype.sameAs=function(other){return this.element===other},Object.defineProperty(CapturedNode.prototype,"element",{get:function(){return this.anElement},enumerable:!0,configurable:!0}),Object.defineProperty(CapturedNode.prototype,"tree",{get:function(){return this.aTree},enumerable:!0,configurable:!0}),CapturedNode}();exports.CapturedNode=CapturedNode}),$__System.registerDynamic("11",["19"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var fn_utils_1=$__require("19"),FoldingType=function(){function FoldingType(_cssClass){this._cssClass=_cssClass}return Object.defineProperty(FoldingType.prototype,"cssClass",{get:function(){return this._cssClass},enumerable:!0,configurable:!0}),FoldingType.Expanded=new FoldingType("node-expanded"),FoldingType.Collapsed=new FoldingType("node-collapsed"),FoldingType.Empty=new FoldingType("node-empty"),FoldingType.Leaf=new FoldingType("node-leaf"),FoldingType}();exports.FoldingType=FoldingType;var TreeModelSettings=function(){function TreeModelSettings(){}return TreeModelSettings.merge=function(sourceA,sourceB){return fn_utils_1.defaultsDeep({},fn_utils_1.get(sourceA,"settings"),fn_utils_1.get(sourceB,"settings"),{static:!1,leftMenu:!1,rightMenu:!0,isCollapsedOnInit:!1})},TreeModelSettings}();exports.TreeModelSettings=TreeModelSettings;!function(TreeStatus){TreeStatus[TreeStatus.New=0]="New",TreeStatus[TreeStatus.Modified=1]="Modified",TreeStatus[TreeStatus.IsBeingRenamed=2]="IsBeingRenamed"}(exports.TreeStatus||(exports.TreeStatus={}))}),$__System.registerDynamic("1b",["@empty"],!0,function($__require,exports,module){function rng(){return rb(16)}var rb=(this||self,$__require("@empty").randomBytes);module.exports=rng}),$__System.registerDynamic("1c",[],!0,function($__require,exports,module){function bytesToUuid(buf,offset){var i=offset||0,bth=byteToHex;return bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]}for(var byteToHex=(this||self,[]),i=0;i<256;++i)byteToHex[i]=(i+256).toString(16).substr(1);module.exports=bytesToUuid}),$__System.registerDynamic("1d",["1b","1c"],!0,function($__require,exports,module){function v4(options,buf,offset){var i=buf&&offset||0;"string"==typeof options&&(buf="binary"==options?new Array(16):null,options=null),options=options||{};var rnds=options.random||(options.rng||rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf)for(var ii=0;ii<16;++ii)buf[i+ii]=rnds[ii];return buf||bytesToUuid(rnds)}var rng=(this||self,$__require("1b")),bytesToUuid=$__require("1c");module.exports=v4}),$__System.registerDynamic("12",["19","1e","11","1d"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var ChildrenLoadingState,fn_utils_1=$__require("19"),Observable_1=$__require("1e"),tree_types_1=$__require("11"),uuidv4=$__require("1d");!function(ChildrenLoadingState){ChildrenLoadingState[ChildrenLoadingState.NotStarted=0]="NotStarted",ChildrenLoadingState[ChildrenLoadingState.Loading=1]="Loading",ChildrenLoadingState[ChildrenLoadingState.Completed=2]="Completed"}(ChildrenLoadingState||(ChildrenLoadingState={}));var Tree=function(){function Tree(node,parent,isBranch){void 0===parent&&(parent=null),void 0===isBranch&&(isBranch=!1);var _this=this;this._childrenLoadingState=ChildrenLoadingState.NotStarted,this._childrenAsyncOnce=fn_utils_1.once(function(){return new Observable_1.Observable(function(observer){setTimeout(function(){_this._childrenLoadingState=ChildrenLoadingState.Loading,_this._loadChildren(function(children){_this._children=(children||[]).map(function(child){return new Tree(child,_this)}),_this._childrenLoadingState=ChildrenLoadingState.Completed,observer.next(_this.children),observer.complete()})})})}),this.buildTreeFromModel(node,parent,isBranch||Array.isArray(node.children))}return Tree.isValueEmpty=function(value){return fn_utils_1.isEmpty(fn_utils_1.trim(value))},Tree.isRenamable=function(value){return fn_utils_1.has(value,"setName")&&fn_utils_1.isFunction(value.setName)&&fn_utils_1.has(value,"toString")&&fn_utils_1.isFunction(value.toString)&&value.toString!==Object.toString},Tree.cloneTreeShallow=function(origin){var tree=new Tree(Object.assign({},origin.node));return tree._children=origin._children,tree},Tree.applyNewValueToRenamable=function(value,newValue){var renamableValue=Object.assign({},value);return renamableValue.setName(newValue),renamableValue},Tree.prototype.buildTreeFromModel=function(model,parent,isBranch){var _this=this;this.parent=parent,this.node=Object.assign(fn_utils_1.omit(model,"children"),{settings:tree_types_1.TreeModelSettings.merge(model,fn_utils_1.get(parent,"node"))},{emitLoadNextLevel:!0===model.emitLoadNextLevel}),fn_utils_1.isFunction(this.node.loadChildren)?this._loadChildren=this.node.loadChildren:fn_utils_1.get(model,"children",[]).forEach(function(child,index){_this._addChild(new Tree(child,_this),index)}),Array.isArray(this._children)||(this._children=this.node.loadChildren||isBranch?[]:null)},Tree.prototype.hasDeferredChildren=function(){return"function"==typeof this._loadChildren},Tree.prototype.loadingChildrenRequested=function(){this._childrenLoadingState=ChildrenLoadingState.Loading},Tree.prototype.childrenAreBeingLoaded=function(){return this._childrenLoadingState===ChildrenLoadingState.Loading},Tree.prototype.childrenWereLoaded=function(){return this._childrenLoadingState===ChildrenLoadingState.Completed},Tree.prototype.canLoadChildren=function(){return this._childrenLoadingState===ChildrenLoadingState.NotStarted&&this.foldingType===tree_types_1.FoldingType.Expanded&&!!this._loadChildren},Tree.prototype.childrenShouldBeLoaded=function(){return!(this.childrenWereLoaded()||!this._loadChildren&&!0!==this.node.emitLoadNextLevel)},Object.defineProperty(Tree.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(Tree.prototype,"childrenAsync",{get:function(){return this.canLoadChildren()?this._childrenAsyncOnce():Observable_1.Observable.of(this.children)},enumerable:!0,configurable:!0}),Tree.prototype.reloadChildren=function(){var _this=this;this.childrenShouldBeLoaded()&&(this._childrenLoadingState=ChildrenLoadingState.Loading,this._loadChildren(function(children){_this._children=children&&children.map(function(child){return new Tree(child,_this)}),_this._childrenLoadingState=ChildrenLoadingState.Completed}))},Tree.prototype.setChildren=function(children){var _this=this;this._children=children&&children.map(function(child){return new Tree(child,_this)}),this.childrenShouldBeLoaded()&&(this._childrenLoadingState=ChildrenLoadingState.Completed)},Tree.prototype.createNode=function(isBranch,model){void 0===model&&(model={value:""});var tree=new Tree(model,this,isBranch);return model.id||tree.markAsNew(),tree.id=tree.id||uuidv4(),!this.childrenShouldBeLoaded()||this.childrenAreBeingLoaded()||this.childrenWereLoaded()?this.isLeaf()?this.addSibling(tree):this.addChild(tree):null},Object.defineProperty(Tree.prototype,"value",{get:function(){return this.node.value},set:function(value){if("string"==typeof value||Tree.isRenamable(value)){var stringifiedValue=""+value;Tree.isRenamable(this.value)?this.node.value=Tree.applyNewValueToRenamable(this.value,stringifiedValue):this.node.value=Tree.isValueEmpty(stringifiedValue)?this.node.value:stringifiedValue}},enumerable:!0,configurable:!0}),Tree.prototype.addSibling=function(sibling,position){return Array.isArray(fn_utils_1.get(this.parent,"children"))?this.parent.addChild(sibling,position):null},Tree.prototype.addChild=function(child,position){var newborn=this._addChild(Tree.cloneTreeShallow(child),position);return this._setFoldingType(),this.isNodeCollapsed()&&this.switchFoldingType(),newborn},Tree.prototype._addChild=function(child,position){return void 0===position&&(position=fn_utils_1.size(this._children)||0),child.parent=this,Array.isArray(this._children)?this._children.splice(position,0,child):this._children=[child],child},Tree.prototype.swapWithSibling=function(sibling){if(this.hasSibling(sibling)){var siblingIndex=sibling.positionInParent,thisTreeIndex=this.positionInParent;this.parent._children[siblingIndex]=this,this.parent._children[thisTreeIndex]=sibling}},Object.defineProperty(Tree.prototype,"positionInParent",{get:function(){return this.isRoot()?-1:this.parent.children?this.parent.children.indexOf(this):-1},enumerable:!0,configurable:!0}),Tree.prototype.isStatic=function(){return fn_utils_1.get(this.node.settings,"static",!1)},Tree.prototype.hasLeftMenu=function(){return!fn_utils_1.get(this.node.settings,"static",!1)&&fn_utils_1.get(this.node.settings,"leftMenu",!1)},Tree.prototype.hasRightMenu=function(){return!fn_utils_1.get(this.node.settings,"static",!1)&&fn_utils_1.get(this.node.settings,"rightMenu",!1)},Tree.prototype.isLeaf=function(){return!this.isBranch()},Object.defineProperty(Tree.prototype,"menuItems",{get:function(){return fn_utils_1.get(this.node.settings,"menuItems")},enumerable:!0,configurable:!0}),Tree.prototype.hasCustomMenu=function(){return!this.isStatic()&&!!fn_utils_1.get(this.node.settings,"menuItems",!1)},Tree.prototype.isBranch=function(){return!0===this.node.emitLoadNextLevel||Array.isArray(this._children)},Tree.prototype.hasChildren=function(){return!fn_utils_1.isEmpty(this._children)||this.childrenShouldBeLoaded()},Tree.prototype.isRoot=function(){return fn_utils_1.isNil(this.parent)},Tree.prototype.hasSibling=function(tree){return!this.isRoot()&&fn_utils_1.includes(this.parent.children,tree)},Tree.prototype.hasChild=function(tree){return fn_utils_1.includes(this._children,tree)},Tree.prototype.removeChild=function(tree){if(this.hasChildren()){var childIndex=this._children.findIndex(function(child){return child===tree});childIndex>=0&&this._children.splice(childIndex,1),this._setFoldingType()}},Tree.prototype.removeItselfFromParent=function(){this.parent&&this.parent.removeChild(this)},Tree.prototype.switchFoldingType=function(){!this.isLeaf()&&this.hasChildren()&&(this.disableCollapseOnInit(),this.node._foldingType=this.isNodeExpanded()?tree_types_1.FoldingType.Collapsed:tree_types_1.FoldingType.Expanded)},Tree.prototype.isNodeExpanded=function(){return this.foldingType===tree_types_1.FoldingType.Expanded},Tree.prototype.isNodeCollapsed=function(){return this.foldingType===tree_types_1.FoldingType.Collapsed},Tree.prototype._setFoldingType=function(){this.childrenShouldBeLoaded()?this.node._foldingType=tree_types_1.FoldingType.Collapsed:this._children&&!fn_utils_1.isEmpty(this._children)?this.node._foldingType=this.isCollapsedOnInit()?tree_types_1.FoldingType.Collapsed:tree_types_1.FoldingType.Expanded:Array.isArray(this._children)?this.node._foldingType=tree_types_1.FoldingType.Empty:this.node._foldingType=tree_types_1.FoldingType.Leaf},Object.defineProperty(Tree.prototype,"foldingType",{get:function(){return this.node._foldingType||this._setFoldingType(),this.node._foldingType},enumerable:!0,configurable:!0}),Object.defineProperty(Tree.prototype,"foldingCssClass",{get:function(){return this.getCssClassesFromSettings()||this.foldingType.cssClass},enumerable:!0,configurable:!0}),Tree.prototype.getCssClassesFromSettings=function(){return this.node._foldingType||this._setFoldingType(),this.node._foldingType===tree_types_1.FoldingType.Collapsed?fn_utils_1.get(this.node.settings,"cssClasses.collapsed",null):this.node._foldingType===tree_types_1.FoldingType.Expanded?fn_utils_1.get(this.node.settings,"cssClasses.expanded",null):this.node._foldingType===tree_types_1.FoldingType.Empty?fn_utils_1.get(this.node.settings,"cssClasses.empty",null):fn_utils_1.get(this.node.settings,"cssClasses.leaf",null)},Object.defineProperty(Tree.prototype,"nodeTemplate",{get:function(){return this.getTemplateFromSettings()},enumerable:!0,configurable:!0}),Tree.prototype.getTemplateFromSettings=function(){return this.isLeaf()?fn_utils_1.get(this.node.settings,"templates.leaf",""):fn_utils_1.get(this.node.settings,"templates.node","")},Object.defineProperty(Tree.prototype,"leftMenuTemplate",{get:function(){return this.hasLeftMenu()?fn_utils_1.get(this.node.settings,"templates.leftMenu","<span></span>"):""},enumerable:!0,configurable:!0}),Tree.prototype.disableCollapseOnInit=function(){this.node.settings&&(this.node.settings.isCollapsedOnInit=!1)},Tree.prototype.isCollapsedOnInit=function(){return!!fn_utils_1.get(this.node.settings,"isCollapsedOnInit")},Tree.prototype.isNew=function(){return this.node._status===tree_types_1.TreeStatus.New},Object.defineProperty(Tree.prototype,"id",{get:function(){return fn_utils_1.get(this.node,"id")},set:function(id){this.node.id=id},enumerable:!0,configurable:!0}),Tree.prototype.markAsNew=function(){this.node._status=tree_types_1.TreeStatus.New},Tree.prototype.isBeingRenamed=function(){return this.node._status===tree_types_1.TreeStatus.IsBeingRenamed},Tree.prototype.markAsBeingRenamed=function(){this.node._status=tree_types_1.TreeStatus.IsBeingRenamed},Tree.prototype.isModified=function(){return this.node._status===tree_types_1.TreeStatus.Modified},Tree.prototype.markAsModified=function(){this.node._status=tree_types_1.TreeStatus.Modified},Tree.prototype.toTreeModel=function(){var model=fn_utils_1.defaultsDeep(this.isLeaf()?{}:{children:[]},this.node);return this.children&&this.children.forEach(function(child){model.children.push(child.toTreeModel())}),model},Tree}();exports.Tree=Tree}),$__System.registerDynamic("1f",["f","20","1a","12"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var core_1=$__require("f"),node_draggable_service_1=$__require("20"),captured_node_1=$__require("1a"),NodeDraggableDirective=($__require("12"),function(){function NodeDraggableDirective(element,nodeDraggableService,renderer){this.element=element,this.nodeDraggableService=nodeDraggableService,this.renderer=renderer,this.disposersForDragListeners=[],this.nodeNativeElement=element.nativeElement}return NodeDraggableDirective.prototype.ngOnInit=function(){this.tree.isStatic()||(this.renderer.setAttribute(this.nodeNativeElement,"draggable","true"),this.disposersForDragListeners.push(this.renderer.listen(this.nodeNativeElement,"dragenter",this.handleDragEnter.bind(this))),this.disposersForDragListeners.push(this.renderer.listen(this.nodeNativeElement,"dragover",this.handleDragOver.bind(this))),this.disposersForDragListeners.push(this.renderer.listen(this.nodeNativeElement,"dragstart",this.handleDragStart.bind(this))),this.disposersForDragListeners.push(this.renderer.listen(this.nodeNativeElement,"dragleave",this.handleDragLeave.bind(this))),this.disposersForDragListeners.push(this.renderer.listen(this.nodeNativeElement,"drop",this.handleDrop.bind(this))),this.disposersForDragListeners.push(this.renderer.listen(this.nodeNativeElement,"dragend",this.handleDragEnd.bind(this))))},NodeDraggableDirective.prototype.ngOnDestroy=function(){this.disposersForDragListeners.forEach(function(dispose){return dispose()})},NodeDraggableDirective.prototype.handleDragStart=function(e){e.stopPropagation(),this.nodeDraggableService.captureNode(new captured_node_1.CapturedNode(this.nodeDraggable,this.tree)),e.dataTransfer.setData("text",NodeDraggableDirective.DATA_TRANSFER_STUB_DATA),e.dataTransfer.effectAllowed="move"},NodeDraggableDirective.prototype.handleDragOver=function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},NodeDraggableDirective.prototype.handleDragEnter=function(e){e.preventDefault(),this.containsElementAt(e)&&this.addClass("over-drop-target")},NodeDraggableDirective.prototype.handleDragLeave=function(e){this.containsElementAt(e)||this.removeClass("over-drop-target")},NodeDraggableDirective.prototype.handleDrop=function(e){return e.preventDefault(),e.stopPropagation(),this.removeClass("over-drop-target"),!!this.isDropPossible(e)&&(this.nodeDraggableService.getCapturedNode()?this.notifyThatNodeWasDropped():void 0)},NodeDraggableDirective.prototype.isDropPossible=function(e){var capturedNode=this.nodeDraggableService.getCapturedNode();return capturedNode&&capturedNode.canBeDroppedAt(this.nodeDraggable)&&this.containsElementAt(e)},NodeDraggableDirective.prototype.handleDragEnd=function(e){this.removeClass("over-drop-target"),this.nodeDraggableService.releaseCapturedNode()},NodeDraggableDirective.prototype.containsElementAt=function(e){var _a=e.x,x=void 0===_a?e.clientX:_a,_b=e.y,y=void 0===_b?e.clientY:_b;return this.nodeNativeElement.contains(document.elementFromPoint(x,y))},NodeDraggableDirective.prototype.addClass=function(className){this.nodeNativeElement.classList.add(className)},NodeDraggableDirective.prototype.removeClass=function(className){this.nodeNativeElement.classList.remove(className)},NodeDraggableDirective.prototype.notifyThatNodeWasDropped=function(){this.nodeDraggableService.fireNodeDragged(this.nodeDraggableService.getCapturedNode(),this.nodeDraggable)},NodeDraggableDirective.DATA_TRANSFER_STUB_DATA="some browsers enable drag-n-drop only when dataTransfer has data",NodeDraggableDirective.decorators=[{type:core_1.Directive,args:[{selector:"[nodeDraggable]"}]}],NodeDraggableDirective.ctorParameters=function(){return[{type:core_1.ElementRef,decorators:[{type:core_1.Inject,args:[core_1.ElementRef]}]},{type:node_draggable_service_1.NodeDraggableService,decorators:[{type:core_1.Inject,args:[node_draggable_service_1.NodeDraggableService]}]},{type:core_1.Renderer2,decorators:[{type:core_1.Inject,args:[core_1.Renderer2]}]}]},NodeDraggableDirective.propDecorators={nodeDraggable:[{type:core_1.Input}],tree:[{type:core_1.Input}]},NodeDraggableDirective}());exports.NodeDraggableDirective=NodeDraggableDirective}),$__System.registerDynamic("18",[],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});!function(NodeEditableEventAction){NodeEditableEventAction[NodeEditableEventAction.Cancel=0]="Cancel"}(exports.NodeEditableEventAction||(exports.NodeEditableEventAction={}))}),$__System.registerDynamic("21",["f","18"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var core_1=$__require("f"),editable_events_1=$__require("18"),NodeEditableDirective=function(){function NodeEditableDirective(renderer,elementRef){this.renderer=renderer,this.elementRef=elementRef,this.valueChanged=new core_1.EventEmitter(!1)}return NodeEditableDirective.prototype.ngOnInit=function(){var nativeElement=this.elementRef.nativeElement;nativeElement&&nativeElement.focus(),this.renderer.setProperty(nativeElement,"value",this.nodeValue)},NodeEditableDirective.prototype.applyNewValue=function(newNodeValue){this.valueChanged.emit({type:"keyup",value:newNodeValue})},NodeEditableDirective.prototype.applyNewValueByLoosingFocus=function(newNodeValue){this.valueChanged.emit({type:"blur",value:newNodeValue})},NodeEditableDirective.prototype.cancelEditing=function(){this.valueChanged.emit({type:"keyup",value:this.nodeValue,action:editable_events_1.NodeEditableEventAction.Cancel})},NodeEditableDirective.decorators=[{type:core_1.Directive,args:[{selector:"[nodeEditable]"}]}],NodeEditableDirective.ctorParameters=function(){return[{type:core_1.Renderer2,decorators:[{type:core_1.Inject,args:[core_1.Renderer2]}]},{type:core_1.ElementRef,decorators:[{type:core_1.Inject,args:[core_1.ElementRef]}]}]},NodeEditableDirective.propDecorators={nodeValue:[{type:core_1.Input,args:["nodeEditable"]}],valueChanged:[{type:core_1.Output}],applyNewValue:[{type:core_1.HostListener,args:["keyup.enter",["$event.target.value"]]}],applyNewValueByLoosingFocus:[{type:core_1.HostListener,args:["blur",["$event.target.value"]]}],cancelEditing:[{type:core_1.HostListener,args:["keyup.esc"]}]},NodeEditableDirective}();exports.NodeEditableDirective=NodeEditableDirective}),$__System.registerDynamic("15",[],!0,function($__require,exports,module){"use strict";function isLeftButtonClicked(e){return e.button===MouseButtons.Left}function isRightButtonClicked(e){return e.button===MouseButtons.Right}function isEscapePressed(e){return e.keyCode===Keys.Escape}this||self;Object.defineProperty(exports,"__esModule",{value:!0});var Keys;!function(Keys){Keys[Keys.Escape=27]="Escape"}(Keys=exports.Keys||(exports.Keys={}));var MouseButtons;!function(MouseButtons){MouseButtons[MouseButtons.Left=0]="Left",MouseButtons[MouseButtons.Right=2]="Right"}(MouseButtons=exports.MouseButtons||(exports.MouseButtons={})),exports.isLeftButtonClicked=isLeftButtonClicked,exports.isRightButtonClicked=isRightButtonClicked,exports.isEscapePressed=isEscapePressed}),$__System.registerDynamic("22",["f","17","14","15"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var core_1=$__require("f"),node_menu_service_1=$__require("17"),menu_events_1=$__require("14"),event_utils_1=$__require("15"),NodeMenuComponent=function(){function NodeMenuComponent(renderer,nodeMenuService){this.renderer=renderer,this.nodeMenuService=nodeMenuService,this.menuItemSelected=new core_1.EventEmitter,this.availableMenuItems=[{name:"New tag",action:menu_events_1.NodeMenuItemAction.NewTag,cssClass:"new-tag"},{name:"New folder",action:menu_events_1.NodeMenuItemAction.NewFolder,cssClass:"new-folder"},{name:"Rename",action:menu_events_1.NodeMenuItemAction.Rename,cssClass:"rename"},{name:"Remove",action:menu_events_1.NodeMenuItemAction.Remove,cssClass:"remove"}],this.disposersForGlobalListeners=[]}return NodeMenuComponent.prototype.ngOnInit=function(){this.availableMenuItems=this.menuItems||this.availableMenuItems,this.disposersForGlobalListeners.push(this.renderer.listen("document","keyup",this.closeMenu.bind(this))),this.disposersForGlobalListeners.push(this.renderer.listen("document","mousedown",this.closeMenu.bind(this)))},NodeMenuComponent.prototype.ngOnDestroy=function(){this.disposersForGlobalListeners.forEach(function(dispose){return dispose()})},NodeMenuComponent.prototype.onMenuItemSelected=function(e,selectedMenuItem){event_utils_1.isLeftButtonClicked(e)&&(this.menuItemSelected.emit({nodeMenuItemAction:selectedMenuItem.action,nodeMenuItemSelected:selectedMenuItem.name}),this.nodeMenuService.fireMenuEvent(e.target,menu_events_1.NodeMenuAction.Close))},NodeMenuComponent.prototype.closeMenu=function(e){var mouseClicked=e instanceof MouseEvent,containingTarget=this.menuContainer.nativeElement!==e.target&&this.menuContainer.nativeElement.contains(e.target);(mouseClicked&&!containingTarget||event_utils_1.isEscapePressed(e))&&this.nodeMenuService.fireMenuEvent(e.target,menu_events_1.NodeMenuAction.Close)},NodeMenuComponent.decorators=[{type:core_1.Component,args:[{selector:"node-menu",template:'\n    <div class="node-menu">\n      <ul class="node-menu-content" #menuContainer>\n        <li class="node-menu-item" *ngFor="let menuItem of availableMenuItems"\n          (click)="onMenuItemSelected($event, menuItem)">\n          <div class="node-menu-item-icon {{menuItem.cssClass}}"></div>\n          <span class="node-menu-item-value">{{menuItem.name}}</span>\n        </li>\n      </ul>\n    </div>\n  '}]}],NodeMenuComponent.ctorParameters=function(){return[{type:core_1.Renderer2,decorators:[{type:core_1.Inject,args:[core_1.Renderer2]}]},{type:node_menu_service_1.NodeMenuService,decorators:[{type:core_1.Inject,args:[node_menu_service_1.NodeMenuService]}]}]},NodeMenuComponent.propDecorators={menuItemSelected:[{type:core_1.Output}],menuItems:[{type:core_1.Input}],menuContainer:[{type:core_1.ViewChild,args:["menuContainer"]}]},NodeMenuComponent}();exports.NodeMenuComponent=NodeMenuComponent}),$__System.registerDynamic("14",[],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});!function(NodeMenuItemAction){NodeMenuItemAction[NodeMenuItemAction.NewFolder=0]="NewFolder",NodeMenuItemAction[NodeMenuItemAction.NewTag=1]="NewTag",NodeMenuItemAction[NodeMenuItemAction.Rename=2]="Rename",NodeMenuItemAction[NodeMenuItemAction.Remove=3]="Remove",NodeMenuItemAction[NodeMenuItemAction.Custom=4]="Custom"}(exports.NodeMenuItemAction||(exports.NodeMenuItemAction={}));!function(NodeMenuAction){NodeMenuAction[NodeMenuAction.Close=0]="Close"}(exports.NodeMenuAction||(exports.NodeMenuAction={}))}),$__System.registerDynamic("17",["f","23","14"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var core_1=$__require("f"),Subject_1=$__require("23"),menu_events_1=$__require("14"),NodeMenuService=function(){function NodeMenuService(){this.nodeMenuEvents$=new Subject_1.Subject}return NodeMenuService.prototype.fireMenuEvent=function(sender,action){var nodeMenuEvent={sender:sender,action:action};this.nodeMenuEvents$.next(nodeMenuEvent)},NodeMenuService.prototype.hideMenuStream=function(treeElementRef){return this.nodeMenuEvents$.filter(function(e){return treeElementRef.nativeElement!==e.sender}).filter(function(e){return e.action===menu_events_1.NodeMenuAction.Close})},NodeMenuService.prototype.hideMenuForAllNodesExcept=function(treeElementRef){this.nodeMenuEvents$.next({sender:treeElementRef.nativeElement,action:menu_events_1.NodeMenuAction.Close})},NodeMenuService.decorators=[{type:core_1.Injectable}],NodeMenuService.ctorParameters=function(){return[]},NodeMenuService}();exports.NodeMenuService=NodeMenuService}),$__System.registerDynamic("24",[],!0,function($__require,exports,module){"use strict";var __extends=(this||self,exports&&exports.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}());Object.defineProperty(exports,"__esModule",{value:!0});var NodeEvent=function(){function NodeEvent(node){this.node=node}return NodeEvent}();exports.NodeEvent=NodeEvent;var NodeSelectedEvent=function(_super){function NodeSelectedEvent(node){return _super.call(this,node)||this}return __extends(NodeSelectedEvent,_super),NodeSelectedEvent}(NodeEvent);exports.NodeSelectedEvent=NodeSelectedEvent;var NodeDestructiveEvent=function(_super){function NodeDestructiveEvent(node){return _super.call(this,node)||this}return __extends(NodeDestructiveEvent,_super),NodeDestructiveEvent}(NodeEvent);exports.NodeDestructiveEvent=NodeDestructiveEvent;var NodeMovedEvent=function(_super){function NodeMovedEvent(node,previousParent){var _this=_super.call(this,node)||this;return _this.previousParent=previousParent,_this}return __extends(NodeMovedEvent,_super),NodeMovedEvent}(NodeDestructiveEvent);exports.NodeMovedEvent=NodeMovedEvent;var NodeRemovedEvent=function(_super){function NodeRemovedEvent(node,lastIndex){var _this=_super.call(this,node)||this;return _this.lastIndex=lastIndex,_this}return __extends(NodeRemovedEvent,_super),NodeRemovedEvent}(NodeDestructiveEvent);exports.NodeRemovedEvent=NodeRemovedEvent;var NodeCreatedEvent=function(_super){function NodeCreatedEvent(node){return _super.call(this,node)||this}return __extends(NodeCreatedEvent,_super),NodeCreatedEvent}(NodeDestructiveEvent);exports.NodeCreatedEvent=NodeCreatedEvent;var NodeRenamedEvent=function(_super){function NodeRenamedEvent(node,oldValue,newValue){var _this=_super.call(this,node)||this;return _this.oldValue=oldValue,_this.newValue=newValue,_this}return __extends(NodeRenamedEvent,_super),NodeRenamedEvent}(NodeDestructiveEvent);exports.NodeRenamedEvent=NodeRenamedEvent;var NodeExpandedEvent=function(_super){function NodeExpandedEvent(node){return _super.call(this,node)||this}return __extends(NodeExpandedEvent,_super),NodeExpandedEvent}(NodeEvent);exports.NodeExpandedEvent=NodeExpandedEvent;var NodeCollapsedEvent=function(_super){function NodeCollapsedEvent(node){return _super.call(this,node)||this}return __extends(NodeCollapsedEvent,_super),NodeCollapsedEvent}(NodeEvent);exports.NodeCollapsedEvent=NodeCollapsedEvent;var MenuItemSelectedEvent=function(_super){function MenuItemSelectedEvent(node,selectedItem){var _this=_super.call(this,node)||this;return _this.selectedItem=selectedItem,_this}return __extends(MenuItemSelectedEvent,_super),MenuItemSelectedEvent}(NodeEvent);exports.MenuItemSelectedEvent=MenuItemSelectedEvent;var LoadNextLevelEvent=function(_super){function LoadNextLevelEvent(node){return _super.call(this,node)||this}return __extends(LoadNextLevelEvent,_super),LoadNextLevelEvent}(NodeEvent);exports.LoadNextLevelEvent=LoadNextLevelEvent}),$__System.registerDynamic("25",[],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var NodeDraggableEvent=function(){function NodeDraggableEvent(captured,target){this.captured=captured,this.target=target}return NodeDraggableEvent}();exports.NodeDraggableEvent=NodeDraggableEvent}),$__System.registerDynamic("20",["f","23","25"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var core_1=$__require("f"),Subject_1=$__require("23"),draggable_events_1=$__require("25"),NodeDraggableService=function(){function NodeDraggableService(){this.draggableNodeEvents$=new Subject_1.Subject}return NodeDraggableService.prototype.fireNodeDragged=function(captured,target){captured.tree&&!captured.tree.isStatic()&&this.draggableNodeEvents$.next(new draggable_events_1.NodeDraggableEvent(captured,target))},NodeDraggableService.prototype.captureNode=function(node){this.capturedNode=node},NodeDraggableService.prototype.getCapturedNode=function(){return this.capturedNode},NodeDraggableService.prototype.releaseCapturedNode=function(){this.capturedNode=null},NodeDraggableService.decorators=[{type:core_1.Injectable}],NodeDraggableService.ctorParameters=function(){return[]},NodeDraggableService}();exports.NodeDraggableService=NodeDraggableService}),$__System.registerDynamic("19",[],!0,function($__require,exports,module){"use strict";function isEmpty(value){return"string"==typeof value?!/\S/.test(value):Array.isArray(value)?0===value.length:isNil(value)}function trim(value){return isNil(value)?"":value.trim()}function has(value,prop){return value&&"object"==typeof value&&value.hasOwnProperty(prop)}function isFunction(value){return"function"==typeof value}function get(value,path,defaultValue){for(var result=value,_i=0,_a=path.split(".");_i<_a.length;_i++){var prop=_a[_i];if(!result||!Reflect.has(result,prop))return defaultValue;result=result[prop]}return isNil(result)||result===value?defaultValue:result}function omit(value,propToSkip){return Object.keys(value).reduce(function(result,prop){return prop===propToSkip?result:Object.assign(result,(_a={},_a[prop]=value[prop],_a));var _a},{})}function size(value){return isEmpty(value)?0:value.length}function once(fn){var result;return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return fn&&(result=fn.apply(null,args),fn=null),result}}function defaultsDeep(target){for(var sources=[],_i=1;_i<arguments.length;_i++)sources[_i-1]=arguments[_i];return[target].concat(sources).reduce(function(result,source){return source?(Object.keys(source).forEach(function(prop){return isNil(result[prop])?void(result[prop]=source[prop]):"object"!=typeof result[prop]||Array.isArray(result[prop])?void 0:void(result[prop]=defaultsDeep(result[prop],source[prop]))}),result):result},{})}function includes(target,value){return!isNil(target)&&target.indexOf(value)>-1}function isNil(value){return void 0===value||null===value}this||self;Object.defineProperty(exports,"__esModule",{value:!0}),exports.isEmpty=isEmpty,exports.trim=trim,exports.has=has,exports.isFunction=isFunction,exports.get=get,exports.omit=omit,exports.size=size,exports.once=once,exports.defaultsDeep=defaultsDeep,exports.includes=includes,exports.isNil=isNil}),$__System.registerDynamic("10",["24","23","f","20","19"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var tree_events_1=$__require("24"),Subject_1=$__require("23"),core_1=$__require("f"),node_draggable_service_1=$__require("20"),fn_utils_1=$__require("19"),TreeService=function(){function TreeService(nodeDraggableService){this.nodeDraggableService=nodeDraggableService,this.nodeMoved$=new Subject_1.Subject,this.nodeRemoved$=new Subject_1.Subject,this.nodeRenamed$=new Subject_1.Subject,this.nodeCreated$=new Subject_1.Subject,this.nodeSelected$=new Subject_1.Subject,this.nodeExpanded$=new Subject_1.Subject,this.nodeCollapsed$=new Subject_1.Subject,this.menuItemSelected$=new Subject_1.Subject,this.loadNextLevel$=new Subject_1.Subject,this.controllers=new Map,this.nodeRemoved$.subscribe(function(e){return e.node.removeItselfFromParent()})}return TreeService.prototype.unselectStream=function(tree){return this.nodeSelected$.filter(function(e){return tree!==e.node})},TreeService.prototype.fireNodeRemoved=function(tree){this.nodeRemoved$.next(new tree_events_1.NodeRemovedEvent(tree,tree.positionInParent))},TreeService.prototype.fireNodeCreated=function(tree){this.nodeCreated$.next(new tree_events_1.NodeCreatedEvent(tree))},TreeService.prototype.fireNodeSelected=function(tree){this.nodeSelected$.next(new tree_events_1.NodeSelectedEvent(tree))},TreeService.prototype.fireNodeRenamed=function(oldValue,tree){this.nodeRenamed$.next(new tree_events_1.NodeRenamedEvent(tree,oldValue,tree.value))},TreeService.prototype.fireNodeMoved=function(tree,parent){this.nodeMoved$.next(new tree_events_1.NodeMovedEvent(tree,parent))},TreeService.prototype.fireMenuItemSelected=function(tree,selectedItem){this.menuItemSelected$.next(new tree_events_1.MenuItemSelectedEvent(tree,selectedItem))},TreeService.prototype.fireNodeSwitchFoldingType=function(tree){tree.isNodeExpanded()?(this.fireNodeExpanded(tree),this.shouldFireLoadNextLevel(tree)&&this.fireLoadNextLevel(tree)):tree.isNodeCollapsed()&&this.fireNodeCollapsed(tree)},TreeService.prototype.fireNodeExpanded=function(tree){this.nodeExpanded$.next(new tree_events_1.NodeExpandedEvent(tree))},TreeService.prototype.fireNodeCollapsed=function(tree){this.nodeCollapsed$.next(new tree_events_1.NodeCollapsedEvent(tree))},TreeService.prototype.fireLoadNextLevel=function(tree){this.loadNextLevel$.next(new tree_events_1.LoadNextLevelEvent(tree))},TreeService.prototype.draggedStream=function(tree,element){return this.nodeDraggableService.draggableNodeEvents$.filter(function(e){return e.target===element}).filter(function(e){return!e.captured.tree.hasChild(tree)})},TreeService.prototype.setController=function(id,controller){this.controllers.set(id,controller)},TreeService.prototype.deleteController=function(id){this.controllers.has(id)&&this.controllers.delete(id)},TreeService.prototype.getController=function(id){return this.controllers.has(id)?this.controllers.get(id):null},TreeService.prototype.hasController=function(id){return this.controllers.has(id)},TreeService.prototype.shouldFireLoadNextLevel=function(tree){var shouldLoadNextLevel=tree.node.emitLoadNextLevel&&!tree.node.loadChildren&&!tree.childrenAreBeingLoaded()&&(!tree.children||fn_utils_1.isEmpty(tree.children));return shouldLoadNextLevel&&tree.loadingChildrenRequested(),shouldLoadNextLevel},TreeService.decorators=[{type:core_1.Injectable}],TreeService.ctorParameters=function(){return[{type:node_draggable_service_1.NodeDraggableService,decorators:[{type:core_1.Inject,args:[node_draggable_service_1.NodeDraggableService]}]}]},TreeService}();exports.TreeService=TreeService}),$__System.registerDynamic("26",["f","27"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var core_1=$__require("f"),platform_browser_1=$__require("27"),SafeHtmlPipe=function(){function SafeHtmlPipe(sanitizer){this.sanitizer=sanitizer}return SafeHtmlPipe.prototype.transform=function(value){return this.sanitizer.bypassSecurityTrustHtml(value)},SafeHtmlPipe.decorators=[{type:core_1.Pipe,args:[{name:"safeHtml"}]}],SafeHtmlPipe.ctorParameters=function(){return[{type:platform_browser_1.DomSanitizer}]},SafeHtmlPipe}();exports.SafeHtmlPipe=SafeHtmlPipe}),$__System.registerDynamic("28",["b","f","e","16","29","1f","20","21","22","17","10","26"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0}),$__require("b");var core_1=$__require("f"),tree_component_1=$__require("e"),tree_internal_component_1=$__require("16"),common_1=$__require("29"),node_draggable_directive_1=$__require("1f"),node_draggable_service_1=$__require("20"),node_editable_directive_1=$__require("21"),node_menu_component_1=$__require("22"),node_menu_service_1=$__require("17"),tree_service_1=$__require("10"),safe_html_pipe_1=$__require("26"),TreeModule=function(){function TreeModule(){}return TreeModule.decorators=[{type:core_1.NgModule,args:[{imports:[common_1.CommonModule],declarations:[node_draggable_directive_1.NodeDraggableDirective,tree_component_1.TreeComponent,node_editable_directive_1.NodeEditableDirective,node_menu_component_1.NodeMenuComponent,tree_internal_component_1.TreeInternalComponent,safe_html_pipe_1.SafeHtmlPipe],exports:[tree_component_1.TreeComponent],providers:[node_draggable_service_1.NodeDraggableService,node_menu_service_1.NodeMenuService,tree_service_1.TreeService]}]}],TreeModule.ctorParameters=function(){return[]},TreeModule}();exports.TreeModule=TreeModule}),$__System.registerDynamic("a",["11","12","14","24","e","28"],!0,function($__require,exports,module){"use strict";this||self;Object.defineProperty(exports,"__esModule",{value:!0});var tree_types_1=$__require("11");exports.TreeModelSettings=tree_types_1.TreeModelSettings,exports.FoldingType=tree_types_1.FoldingType;var tree_1=$__require("12");exports.Tree=tree_1.Tree;var menu_events_1=$__require("14");exports.NodeMenuItemAction=menu_events_1.NodeMenuItemAction;var tree_events_1=$__require("24");exports.NodeEvent=tree_events_1.NodeEvent,exports.NodeCreatedEvent=tree_events_1.NodeCreatedEvent,exports.NodeRemovedEvent=tree_events_1.NodeRemovedEvent,exports.NodeRenamedEvent=tree_events_1.NodeRenamedEvent,exports.NodeMovedEvent=tree_events_1.NodeMovedEvent,exports.NodeSelectedEvent=tree_events_1.NodeSelectedEvent,exports.NodeExpandedEvent=tree_events_1.NodeExpandedEvent,exports.NodeCollapsedEvent=tree_events_1.NodeCollapsedEvent,exports.MenuItemSelectedEvent=tree_events_1.MenuItemSelectedEvent,exports.NodeDestructiveEvent=tree_events_1.NodeDestructiveEvent;var tree_component_1=$__require("e");exports.TreeComponent=tree_component_1.TreeComponent;var tree_module_1=$__require("28");exports.TreeModule=tree_module_1.TreeModule})})(function(factory){if("function"==typeof define&&define.amd)define(["@angular/common","@angular/core","@angular/platform-browser","rxjs/Observable","rxjs/Subject","rxjs/add/observable/of","rxjs/add/operator/filter"],factory);else{if("object"!=typeof module||!module.exports||"function"!=typeof require)throw new Error("Module must be loaded as AMD or CommonJS");module.exports=factory(require("@angular/common"),require("@angular/core"),require("@angular/platform-browser"),require("rxjs/Observable"),require("rxjs/Subject"),require("rxjs/add/observable/of"),require("rxjs/add/operator/filter"))}});
//# sourceMappingURL=ng2-tree.umd.min.js.map